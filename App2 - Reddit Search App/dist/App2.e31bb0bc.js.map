{"version":3,"sources":["redditapi.js","index.js"],"names":["search","searchTerm","searchLimit","sortBy","fetch","then","res","json","data","children","map","catch","err","console","log","searchForm","document","getElementById","searchInput","addEventListener","e","value","querySelector","showMessage","reddit","results","output","forEach","post","image","preview","images","source","url","ts","created_utc","ts_ms","date_ob","Date","year","getFullYear","month","getMonth","slice","date","getDate","hours","getHours","minutes","getMinutes","seconds","getSeconds","formattedTime","title","truncateText","selftext","subreddit","score","innerHTML","preventDefault","message","className","div","createElement","appendChild","createTextNode","searchContainer","insertBefore","setTimeout","remove","text","limit","shortened","indexOf","substring"],"mappings":"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","file":"App2.e31bb0bc.js","sourceRoot":"..","sourcesContent":["export default {\r\n    search: function(searchTerm, searchLimit, sortBy) {\r\n        return fetch(`http://www.reddit.com/search.json?q=${searchTerm}&sort=${sortBy}&limit=${searchLimit}`)\r\n        .then(res => res.json())\r\n        .then(data => data.data.children.map(data => data.data))\r\n        .catch(err => console.log(err));\r\n    }\r\n};","import reddit from './redditapi';\r\n\r\n\r\nconst searchForm = document.getElementById('search-form');\r\nconst searchInput = document.getElementById('search-input');\r\n\r\nsearchForm.addEventListener('submit', e => {\r\n    // Get search term\r\n    const searchTerm = searchInput.value;\r\n    // Get soft\r\n    const sortBy = document.querySelector('input[name=\"sortby\"]:checked').value;\r\n    // Get limit\r\n    const searchLimit = document.getElementById('limit').value;\r\n\r\n    // Check input\r\n    if (searchTerm === '') {\r\n        // Show message\r\n        showMessage('Please add a search term','alert-danger');\r\n    }\r\n\r\n    // Clear input\r\n    searchInput.value = '';\r\n\r\n    // Search Reddit\r\n    reddit.search(searchTerm, searchLimit, sortBy)\r\n    .then(results => {\r\n        let output = '<div class=\"card-columns\">';\r\n        // Loop through posts\r\n        results.forEach(post => {\r\n            console.log(post);\r\n            // Check for image\r\n            const image = post.preview ? post.preview.images[0].source.url : 'https://static.adweek.com/adweek.com-prod/wp-content/uploads/2019/10/Reddit-Logo-Horizontal.png';\r\n            // Convert Timestamp\r\n\r\n\r\n// unix timestamp\r\nvar ts = post.created_utc;\r\n\r\n// convert unix timestamp to milliseconds\r\nvar ts_ms = ts * 1000;\r\n\r\n// initialize new Date object\r\nvar date_ob = new Date(ts_ms);\r\n\r\n// year as 4 digits (YYYY)\r\nvar year = date_ob.getFullYear();\r\n\r\n// month as 2 digits (MM)\r\nvar month = (\"0\" + (date_ob.getMonth() + 1)).slice(-2);\r\n\r\n// date as 2 digits (DD)\r\nvar date = (\"0\" + date_ob.getDate()).slice(-2);\r\n\r\n// hours as 2 digits (hh)\r\nvar hours = (\"0\" + date_ob.getHours()).slice(-2);\r\n\r\n// minutes as 2 digits (mm)\r\nvar minutes = (\"0\" + date_ob.getMinutes()).slice(-2);\r\n\r\n// seconds as 2 digits (ss)\r\nvar seconds = (\"0\" + date_ob.getSeconds()).slice(-2);\r\n\r\n// date & time as YYYY-MM-DD hh:mm:ss format: \r\nlet formattedTime = date + \"/\" + month + \"/\" + year + \" \" + hours + \":\" + minutes;\r\n\r\n\r\n            output += `\r\n            <div class=\"card\">\r\n  <img src=\"${image}\" class=\"card-img-top\" alt=\"...\">\r\n  <div class=\"card-body\">\r\n    <h5 class=\"card-title\">${post.title}</h5>\r\n    <p class=\"card-text\">${truncateText(post.selftext, 100)}</p>\r\n    <a href=\"${post.url}\" target=\"_blank\" class=\"btn btn-primary\">Read More</a>\r\n    <hr>\r\n    <span class=\"badge badge-secondary\">Subreddit: ${post.subreddit}</span>\r\n    <span class=\"badge badge-dark\">Score: ${post.score}</span>\r\n    <span class=\"badge badge-primary\">Posted: ${formattedTime}</span>\r\n  </div>\r\n</div>\r\n            `;\r\n        });\r\n\r\n        output += '</div>';\r\n        document.getElementById('results').innerHTML = output;\r\n    }); \r\n\r\n\r\n\r\n    e.preventDefault();\r\n} );\r\n\r\n\r\n\r\n//Show message\r\nfunction showMessage(message, className) {\r\n    // Create div\r\n    const div = document.createElement('div');\r\n    // Add classes\r\n    div.className = `alert ${className}`;\r\n    // Add text\r\n    div.appendChild(document.createTextNode(message));\r\n    // Get parent\r\n    const searchContainer = document.getElementById('search-container');\r\n    //Get search\r\n    const search = document.getElementById('search');\r\n\r\n    // Insert message\r\n    searchContainer.insertBefore(div, search);\r\n\r\n    // Timeout alert\r\n    setTimeout(() => document.querySelector('.alert').remove(), 3000);\r\n}\r\n\r\n\r\n// Truncate text\r\nfunction truncateText(text, limit) {\r\n    const shortened = text.indexOf(' ', limit);\r\n    if (shortened == -1) return text;\r\n    return text.substring(0, shortened);\r\n}"]}